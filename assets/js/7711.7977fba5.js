"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[7711],{27711:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"error-suppressions","title":"Error Suppressions","description":"How to suppress errors in Pyrefly","source":"@site/docs/error-suppressions.mdx","sourceDirName":".","slug":"/error-suppressions","permalink":"/en/docs/error-suppressions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/pyrefly/edit/main/website/docs/error-suppressions.mdx","tags":[],"version":"current","frontMatter":{"title":"Error Suppressions","description":"How to suppress errors in Pyrefly"},"sidebar":"docsSidebar","previous":{"title":"IDE","permalink":"/en/docs/IDE"},"next":{"title":"Error Kinds","permalink":"/en/docs/error-kinds"}}');var s=n(74848),o=n(28453),l=n(31888);const i={title:"Error Suppressions",description:"How to suppress errors in Pyrefly"},a=void 0,c={},p=[{value:"Upgrading Pyrefly (And other changes that introduce new type errors)",id:"upgrading-pyrefly-and-other-changes-that-introduce-new-type-errors",level:2}];function u(e){const r={code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{children:"The Python type system allows you to suppress errors with a comment. This feature can be helpful in many scenarios. For example, after enabling a type checker, suppressions can allow you to get a clean type check signal without having to stop and fix every pre-existing error in your code."}),"\n",(0,s.jsx)(r.p,{children:"There are multiple ways to do this in Pyrefly."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'def foo() -> int:\n  # pyrefly: ignore\n  return "this is a type error"\n'})}),"\n",(0,s.jsx)(r.p,{children:"You can also put the comment on the same line as the error."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'def foo() -> int:\n  return "this is a type error" # pyrefly: ignore\n'})}),"\n",(0,s.jsx)(r.p,{children:"You can also target specific error types:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'def foo() -> int:\n  return "this is a type error" # pyrefly: ignore[bad-return]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["We respect the specification and allow ",(0,s.jsx)(r.code,{children:"type: ignore"})," to be used:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'def foo() -> int:\n  return "this is a type error" # type: ignore\n'})}),"\n",(0,s.jsx)(r.p,{children:"We also have a special comment that will ignore all errors in a file."}),"\n",(0,s.jsx)("pre",{children:(0,s.jsx)(l.A,{sampleFilename:"why_hints.py",isCodeSnippet:!0,codeSample:'# pyrefly: ignore-all-errors\n\nfrom typing import *\n\ndef test(x: int):\n  return f"{x}"\n\ndef bar() -> int:\n  # this error won\'t be reported\n  return ""\n'})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"upgrading-pyrefly-and-other-changes-that-introduce-new-type-errors",children:"Upgrading Pyrefly (And other changes that introduce new type errors)"}),"\n",(0,s.jsx)(r.p,{children:"Upgrading the version of Pyrefly you're using, or a third party library you depend on can surface new type errors in your code. Fixing them all at once is often not realistic. We've written scripts to help you temporarily silence them."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"# step 1\npyrefly check --suppress-errors\n"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"# step 2\n<run your formatter of choice>\n"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"# step 3\npyrefly check --remove-unused-ignores\n"})}),"\n",(0,s.jsx)(r.p,{children:"Repeat the steps above until you get a clean formatting run and a clean type check."}),"\n",(0,s.jsxs)(r.p,{children:["This will add ",(0,s.jsx)(r.code,{children:" # pyrefly: ignore"})," comments to your code that will enable you to silence errors, and come back and fix them at a later date. This can make the process of upgrading a large codebase much more manageable."]})]})}function d(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},31888:(e,r,n)=>{n.d(r,{A:()=>i});var t=n(35363),s=n(96540),o=(n(32855),n(74848));const l=s.lazy((()=>Promise.all([n.e(1869),n.e(8285),n.e(4129)]).then(n.bind(n,14129))));function i(e){let{sampleFilename:r,codeSample:n=""}=e;if(null==r)throw"Missing sampleFilename. IDE services won't work properly.";const[i,a]=s.useState(!1),[c,p]=s.useState(!1),u=s.useRef(null);return s.useEffect((()=>{if("undefined"==typeof window)return;if(!u.current)return;const e=new IntersectionObserver((e=>{const r=e[0];a(r.isIntersecting),r.isIntersecting&&p(!0)}),{rootMargin:"500px 0px",threshold:.1});return e.observe(u.current),()=>e.disconnect()}),[]),(0,o.jsxs)("div",{ref:u,className:"x1717udv x1ghz6dp",children:[!c&&(0,o.jsx)("div",{className:"xh8yej3 x5yr21d x126k92a xysyzu8 x1tamke2 x1ybsatz x1sp1r08",children:(0,o.jsx)("div",{className:"xb3r6kr x1n2onr6 xif65rj x1iwq0vh",children:n})}),c&&(0,o.jsx)("pre",{className:"xqid1ag x1rea2x4 x1n2onr6 x7ywyr2",children:(0,o.jsx)(t.A,{children:()=>(0,o.jsx)(s.Suspense,{fallback:(0,o.jsx)("div",{children:"Loading..."}),children:(0,o.jsx)(l,{sampleFilename:r,isCodeSnippet:!0,codeSample:n,isInViewport:i})})})})]})}},32855:(e,r,n)=>{n.d(r,{xk:()=>a});var t,s={};var o=function(){if(t)return s;t=1,Object.defineProperty(s,"__esModule",{value:!0}),s.styleq=void 0;var e=new WeakMap;function r(r){var n,t,s;return null!=r&&(n=!0===r.disableCache,t=!0===r.disableMix,s=r.transform),function(){for(var r=[],o="",l=null,i="",a=n?null:e,c=new Array(arguments.length),p=0;p<arguments.length;p++)c[p]=arguments[p];for(;c.length>0;){var u=c.pop();if(null!=u&&!1!==u)if(Array.isArray(u))for(var d=0;d<u.length;d++)c.push(u[d]);else{var h=null!=s?s(u):u;if(null!=h.$$css){var y="";if(null!=a&&a.has(h)){var f=a.get(h);null!=f&&(y=f[0],i=f[2],r.push.apply(r,f[1]),a=f[3])}else{var g=[];for(var m in h){var x=h[m];if("$$css"!==m)"string"==typeof x||null===x?r.includes(m)||(r.push(m),null!=a&&g.push(m),"string"==typeof x&&(y+=y?" "+x:x)):console.error("styleq: ".concat(m," typeof ").concat(String(x),' is not "string" or "null".'));else{var w=h[m];!0!==w&&(i=i?w+"; "+i:w)}}if(null!=a){var j=new WeakMap;a.set(h,[y,g,i,j]),a=j}}y&&(o=o?y+" "+o:y)}else if(t)null==l&&(l={}),l=Object.assign({},h,l);else{var v=null;for(var b in h){var k=h[b];void 0!==k&&(r.includes(b)||(null!=k&&(null==l&&(l={}),null==v&&(v={}),v[b]=k),r.push(b),a=null))}null!=v&&(l=Object.assign(v,l))}}}return[o,l,i]}}return(s.styleq=r()).factory=r,s}();const l=e=>new Error(`Unexpected 'stylex.${e}' call at runtime. Styles must be compiled by '@stylexjs/babel-plugin'.`),i=e=>l(`types.${e}`);function a(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const[t,s,l]=o.styleq(r),i={};return null!=t&&""!==t&&(i.className=t),null!=s&&Object.keys(s).length>0&&(i.style=s),null!=l&&""!==l&&(i["data-style-src"]=l),i}const c={angle:e=>{throw i("angle")},color:e=>{throw i("color")},url:e=>{throw i("url")},image:e=>{throw i("image")},integer:e=>{throw i("integer")},lengthPercentage:e=>{throw i("lengthPercentage")},length:e=>{throw i("length")},percentage:e=>{throw i("percentage")},number:e=>{throw i("number")},resolution:e=>{throw i("resolution")},time:e=>{throw i("time")},transformFunction:e=>{throw i("transformFunction")},transformList:e=>{throw i("transformList")}};function p(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const[t]=o.styleq(r);return t}p.attrs=function(){const{className:e,"data-style-src":r,style:n}=a(...arguments),t={};return null!=e&&""!==e&&(t.class=e),null!=n&&Object.keys(n).length>0&&(t.style=Object.keys(n).map((e=>`${e}:${n[e]};`)).join("")),null!=r&&""!==r&&(t["data-style-src"]=r),t},p.create=function(e){throw l("create")},p.createTheme=(e,r)=>{throw l("createTheme")},p.defineVars=function(e){throw l("defineVars")},p.firstThatWorks=function(){throw l("firstThatWorks")},p.keyframes=e=>{throw l("keyframes")},p.props=a,p.types=c},35363:(e,r,n)=>{n.d(r,{A:()=>o});n(96540);var t=n(9136),s=n(74848);function o(e){let{children:r,fallback:n}=e;return(0,t.default)()?(0,s.jsx)(s.Fragment,{children:r?.()}):n??null}}}]);