"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[4129],{14129:(e,n,t)=>{t.r(n),t.d(n,{createRunPythonCodeFunction:()=>F,default:()=>T,initializePyreflyWasm:()=>$});var o=t(96540),r=t(29030),i=t(8532),s=t(32855),a=t(75812),l=t(74848);const u=40;function x(e,n){e(!0);const t=new Promise((e=>{setTimeout((()=>{e()}),1e3)}));return Promise.all([n(),t]).then((()=>{e(!1)}))}function c(e){let{id:n,onClick:t,defaultLabel:r,runningLabel:i,ariaLabel:s,isRunning:u,setIsRunning:c}=e;void 0!==u&&void 0!==c||([u,c]=(0,o.useState)(!1));const d=u;return(0,l.jsx)("button",{id:n,...{0:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x1eqz52 x66in4q x1heor9g x1q0gjfv xxxer0w x1fh9xkg x1ru2czo"},2:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x9yugl5 x1awj2ng xrynbky x1q0gjfv x1rpuqfj x4afe7t x1debuo4 x1jutyc x187oe4h x1fh9xkg x1ru2czo"},1:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x1eqz52 x66in4q x1heor9g x1q0gjfv xxxer0w x1fh9xkg x1ru2czo x1h6gzvc"},3:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x9yugl5 x1awj2ng xrynbky x1q0gjfv x1rpuqfj x4afe7t x1debuo4 x1jutyc x187oe4h x1fh9xkg x1ru2czo x1h6gzvc"}}[!!u<<1|!!d],onClick:async function(){if(!d){(0,a.R)(a.Y.CLICK,{button_id:n});try{x(c,t)}catch(e){console.error("Error in button action:",e)}}},"aria-label":s||n,disabled:d,onMouseEnter:()=>(0,a.R)(a.Y.HOVER,{button_id:n}),children:(0,l.jsx)("span",{className:"xmtou6a",children:u?i:r})})}let d=function(e){return e.NOT_INITIALIZED="not_initialized",e.INITIALIZING="initializing",e.RUNNING="running",e.FINISHED_RUNNING="finished_running",e}({});function p(e){let{runPython:n,pyodideStatus:t,setPyodideStatus:o}=e;const r=t===d.INITIALIZING||t===d.RUNNING;return(0,l.jsx)(c,{id:"run-python-button",onClick:n,defaultLabel:"\u25b6\ufe0f Run",runningLabel:"\u23f3 Running...",ariaLabel:"run Python code button",isRunning:r,setIsRunning:e=>{o(e?d.RUNNING:d.FINISHED_RUNNING)}})}var h=t(68553),f=t(32992);function m(e){let{error:n,goToDef:t}=e;const{startLineNumber:o,startColumn:i,endLineNumber:s,endColumn:a}=n;let u;u=o===s?i===a?`${o}:${i}`:`${o}:${i}-${a}`:`${o}:${i}-${s}:${a}`;const x=(0,l.jsx)("a",{href:(0,r.default)(`en/docs/error-kinds/#${n.kind}`),target:"_blank",rel:"noopener noreferrer",children:n.kind});return(0,l.jsxs)("span",{className:"x1ypdohk",onClick:()=>t(o,i,s,a),children:[2==n.severity?(0,l.jsxs)("span",{className:"x1s8ghek",children:[" ","INFO"," "]}):4==n.severity?(0,l.jsxs)("span",{className:"xburs04",children:[" ","WARN"," "]}):(0,l.jsxs)("span",{className:"x1x2k2ee",children:["ERROR"," "]}),`${u}: ${n.message_header} `,"[",x,"]",n.message_details&&"\n"+n.message_details]})}function g(e){let{loading:n,goToDef:t,errors:o,internalError:r,pythonOutput:i,pyodideStatus:s,activeTab:a,setActiveTab:u=()=>{}}=e;const x=a,c=null!=o&&o.length>0;return(0,l.jsxs)("div",{id:"sandbox-results-container",className:"xh2ww80 x1n2onr6 xfifm61 x1eqz52 xr44f5h",children:[(0,l.jsx)("div",{className:"x78zum5 x1eqz52 xc7mbzt xif65rj",children:(0,l.jsxs)("ul",{className:"x78zum5 xe8uvvx x1ghz6dp x1717udv x67bb7w",children:[(0,l.jsx)("li",{...{0:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710"},1:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1eqz52 x16u9nvt x1jyxor1"}}[!("errors"!==x)|0],onClick:()=>u("errors"),children:"Type Checking Errors"}),(0,l.jsx)("li",{...{0:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710"},1:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1eqz52 x16u9nvt x1jyxor1"}}[!("output"!==x)|0],onClick:()=>u("output"),children:"Runtime Output"})]})}),(0,l.jsxs)("div",{className:"xysyzu8 x1io82uz",children:[n&&(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"x78zum5 xl56j7k x1anpbxc",children:[(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xkf7kw9"}),(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xlzs402"}),(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf"})]})}),!n&&"errors"===x&&(0,l.jsx)("pre",{className:"xknfcqp x1awh872 xat24cr x1eqz52 xh8yej3 x126k92a x13faqbe x1lliihq",children:(0,l.jsx)("ul",{className:"xe8uvvx x1ghz6dp x1717udv",children:c?o.map(((e,n)=>(0,l.jsx)("li",{...{0:{},1:{className:"x1anpbxc x889kno x19j24cx x1eqz52"}}[!!(n>0)|0],children:(0,l.jsx)(m,{error:e,goToDef:t},n)},n))):(0,l.jsx)("li",{children:r?`Pyrefly encountered an internal error: ${r}.`:null==o?"Pyrefly failed to fetch errors.":0===o?.length?"No errors!":null})})}),"output"===x&&(0,l.jsxs)("pre",{className:"xknfcqp x1awh872 xat24cr x1eqz52 xh8yej3 x126k92a x13faqbe x1lliihq",children:[(0,l.jsx)("span",{className:"x14qql8p",children:"Note: The Python runtime currently only supports features up to Python version 3.12, features from newer versions are not available. \n\n"}),s===d.NOT_INITIALIZED?"No output, please press the \u25b6\ufe0f Run button.":s===d.INITIALIZING?"Loading Python interpreter...":s===d.RUNNING?"Running...":i.trimStart()]})]})]})}var y=t(84138);const b=(e,n)=>{throw"not implemented"},v=new Map;const N=(e,n)=>null,w=new Map;const k=(e,n)=>null,j=new Map;const I=()=>[],C=new Map;y.languages.register({id:"python",extensions:[".py"],aliases:["Python"]}),y.languages.registerCompletionItemProvider("python",{triggerCharacters:[".","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","[",'"',"'"],provideCompletionItems(e,n){try{const t=v.get(e)??b;return{suggestions:t(n.lineNumber,n.column).map((e=>({...e,insertText:e.label.toString()})))}}catch(t){return console.error(t),null}}}),y.languages.registerDefinitionProvider("python",{provideDefinition(e,n){try{const t=(w.get(e)??N)(n.lineNumber,n.column);return null!=t?{uri:e.uri,range:t}:null}catch(t){return console.error(t),null}}}),y.languages.registerHoverProvider("python",{provideHover:(e,n)=>(j.get(e)??k)(n.lineNumber,n.column)}),y.languages.registerInlayHintsProvider("python",{provideInlayHints:e=>({hints:(C.get(e)??I)(),dispose:()=>{}})}),h.wG.config({monaco:y});const z='\n# Welcome to the Pyrefly Sandbox, this is a page\n# where you can write, share and learn about typing in Python.\n#\n# Here are a couple features of this sandbox:\n# - Get real-time type checking feedback\n# - Use reveal_type() to inspect inferred types\n# - experiment with the IDE features that we support (e.g. autocomplete, go-to-definition, hover, etc)\n# - Write and run Python code directly in your browser\n\nfrom typing import *\n\ndef test(x: int):\n  return f"{x}"\n\n# reveal_type will produce a type error that tells you the type Pyrefly has\n# computed for the return (in this case, str)\nreveal_type(test(42))\n'.trimStart();let L=null,S=null,q=null;const R=async e=>{if(L&&q)return q(""),new Promise((n=>{S=n,L?.postMessage(e)}));console.error("Python worker not initialized. Call initializePythonWorker first.")},P=e=>{let{setPythonOutput:n,setPyodideStatus:r}=e;return(0,o.useEffect)((()=>(null===L&&((e,n)=>{if(null!==L)return;q=e;const o=new Worker(new URL(t.p+t.u(8123),t.b),{type:void 0});o.onmessage=t=>{const o=t.data;switch(o.type){case"stdout":case"stderr":return void e((e=>e+"\n"+o.output));case"pyodideStatusUpdate":return void n(o.status);case"runPython":return!o.success&&o.error&&e((e=>e+"\n"+`Error: ${o.error}`)),void(S&&(S(),S=null));default:console.error(`Unknown message type received from worker: ${o}`)}},L=o})(n,r),()=>{})),[n,r]),{runPython:R}};async function $(){const e="undefined"!=typeof window?t.e(3190).then(t.bind(t,93190)):new Promise((e=>{}));try{const n=await e;return await n.default(),await n}catch(n){throw console.error(n),n}}let E=null;function T(e){let{sampleFilename:n,isCodeSnippet:t=!1,codeSample:r=z,isInViewport:i=!0}=e;const a=(0,o.useRef)(null),[c,p]=(0,o.useState)([]),[h,f]=(0,o.useState)(""),[m,b]=(0,o.useState)(!0),[N,k]=(0,o.useState)(null),[I,L]=(0,o.useState)(null),[S,q]=(0,o.useState)(null),[R,T]=(0,o.useState)(d.NOT_INITIALIZED),[_,W]=(0,o.useState)(""),[K,Y]=(0,o.useState)("errors"),[J,Q]=(0,o.useState)(!1);function X(){if(null!=S&&null!=N){!function(e,n){v.set(e,n)}(S,((e,n)=>N.autoComplete(e,n))),function(e,n){w.set(e,n)}(S,((e,n)=>N.gotoDefinition(e,n))),function(e,n){j.set(e,n)}(S,((e,n)=>N.queryType(e,n))),function(e,n){C.set(e,n)}(S,(()=>N.inlayHint()));try{const e=S.getValue();N.updateSource(e);const n=N.getErrors();y.editor.setModelMarkers(S,"default",function(e){return e.map((e=>{const n=e.message_details?`${e.message_header}\n${e.message_details}`:e.message_header;return{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn,message:n,severity:e.severity}}))}(n)),f(""),p(n)}catch(e){console.error(e),f(JSON.stringify(e)),p([])}}}(0,o.useEffect)((()=>{i&&(b(!0),E||(E=$()),E.then((e=>{k(new e.State),b(!1),f("")})).catch((e=>{b(!1),f(JSON.stringify(e))})))}),[i]),y.editor.onDidCreateModel((e=>{const t=U(n);q(t),X()})),(0,o.useEffect)((()=>{X()}),[N,S]);const{runPython:ee}=P({setPythonOutput:W,setPyodideStatus:T}),ne=F(Y,ee),te=(0,o.useCallback)((async()=>{S&&(T(d.RUNNING),await ne(S))}),[S,Y,T]);const oe=function(e,n,t,r,i,s,a){let u=[];u=e?[(0,l.jsx)(O,{model:n}),A(n),D()?null:V(n,s,a,e)].filter(Boolean):[H(t,r,i),M(),V(n,s,a,e),B()];return u.map(((n,t)=>o.cloneElement(n,{key:`button-${t}`,...!e&&D()?{className:{className:"x1i06gni x1i8vjtc"}}:{}})))}(t,S,te,R,T,X,r);return(0,l.jsxs)("div",{id:"sandbox-editor",...{0:{className:"x78zum5 xdt5ytf x98rzlu"},1:{className:"x78zum5 xdt5ytf x98rzlu x1awh872"}}[!(t||D())|0],children:[(0,l.jsxs)("div",{id:"sandbox-code-editor-container",...{0:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d"},1:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d x66in4q x16eypsj"}}[!!t|0],onMouseEnter:()=>Q(!0),onMouseLeave:()=>Q(!1),children:[G(t,n,r,X,(function(e){const o=U(n);if(q(o),t){const n=D()?u+5:0;L(Math.max(50,e.getContentHeight()+n))}a.current=e,e.addCommand(y.KeyMod.CtrlCmd|y.KeyCode.Enter,(()=>{if(!t&&R!==d.INITIALIZING&&R!==d.RUNNING){const n=e.getModel();n&&x((e=>T(e?d.RUNNING:d.FINISHED_RUNNING)),(async()=>{await ne(n)}))}}))}),I),(0,l.jsx)("div",{...s.xk(Z.buttonContainerBase,D()?t?Z.mobileButtonContainerCodeSnippet:Z.mobileButtonContainerSandbox:Z.desktopButtonContainer,!t||J||D()?Z.visibleButtonContainer:Z.hiddenButtonContainer),children:oe})]}),!t&&(0,l.jsx)(g,{loading:m,goToDef:(e,n,t,o)=>{const r=a.current;if(null===r)return;const i={startLineNumber:e,startColumn:n,endLineNumber:t,endColumn:o};r.revealRange(i),r.setSelection(i)},errors:c,internalError:h,pythonOutput:_,pyodideStatus:R,activeTab:K,setActiveTab:Y})]})}function _(e){const n=f.compressToEncodedURIComponent(e),t=`${window.location.pathname}?code=${n}`;window.history.replaceState({},"",t)}function U(e){const n=y.editor.getModels().filter((n=>n?.uri?.path===`/${e}`))[0];if(null==n)return null;const t=function(){if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search).get("code");return e?f.decompressFromEncodedURIComponent(e):null}();return null!=t&&null!=n&&n.setValue(t),n.setValue(n.getValue()),n.updateOptions({tabSize:4,insertSpaces:!0}),n}function D(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function G(e,n,t,o,r,s){const{colorMode:a}=i.G(),u="dark"===a?"vs-dark":"vs-light";if(e)return(0,l.jsx)(h.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:u,onChange:o,onMount:r,keepCurrentModel:!0,height:s,options:{readOnly:D(),domReadOnly:D(),minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}});{const e=window.innerHeight,i=document.querySelector(".navbar"),s=75*(e-(i?.offsetHeight||0))/100;return(0,l.jsx)(h.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:u,onChange:e=>{o(),"string"==typeof e&&_(e)},onMount:r,keepCurrentModel:!0,height:s,options:{minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}})}}function M(){return(0,l.jsx)(c,{id:"share-url-button",onClick:()=>{const e=window.location.href;return navigator.clipboard.writeText(e)},defaultLabel:"\ud83d\udccb Share URL",runningLabel:"\u2713 URL Copied!",ariaLabel:"share URL button"})}function B(){return(0,l.jsx)(c,{id:"github-issues-button",onClick:()=>(window.open("https://github.com/facebook/pyrefly/issues/new/choose","_blank","noopener,noreferrer"),Promise.resolve()),defaultLabel:"\u26a0\ufe0f Report Issue",runningLabel:"\u26a0\ufe0f Report Issue",ariaLabel:"report issue on GitHub"})}function O(e){let{model:n}=e;const t=(0,r.default)("sandbox/");return(0,l.jsx)(c,{id:"open-sandbox-button",onClick:async()=>{if(n){const e=n.getValue(),o=f.compressToEncodedURIComponent(e),r=t+`?code=${o}`;window.location.href=r}return Promise.resolve()},defaultLabel:"\ud83e\uddea Open in Sandbox",runningLabel:"\u23f3 Opening Sandbox...",ariaLabel:"open in sandbox"})}function H(e,n,t){return(0,l.jsx)(p,{runPython:e,pyodideStatus:n,setPyodideStatus:t})}function A(e){return(0,l.jsx)(c,{id:"copy-code-button",onClick:async()=>{if(e){const n=e.getValue();await navigator.clipboard.writeText(n)}return Promise.resolve()},defaultLabel:"\ud83d\udccb Copy",runningLabel:"\u2713 Copied!",ariaLabel:"copy code to clipboard"})}function V(e,n,t,o){return(0,l.jsx)(c,{id:"reset-button",onClick:async()=>{e&&(e.setValue(t),o||_(t),n())},defaultLabel:"\ud83d\udd04 Reset",runningLabel:"\u2713 Reset!",ariaLabel:"reset to default code"})}function F(e,n){return async t=>{if(!t)return;e("output");const o=t.getValue();await n(o)}}const Z={buttonContainerBase:{position:"x10l6tqk",display:"x78zum5",zIndex:"x1n327nk",gap:"x167g77z",rowGap:null,columnGap:null,$$css:!0},mobileButtonContainerCodeSnippet:{bottom:"x191j7n5",right:"xn5hqff",insetInlineStart:null,insetInlineEnd:null,$$css:!0},mobileButtonContainerSandbox:{bottom:"x191j7n5",right:"xn5hqff",insetInlineStart:null,insetInlineEnd:null,flexDirection:"xdt5ytf",$$css:!0},desktopButtonContainer:{top:"xmhk92p",right:"xk6ci0l",insetInlineStart:null,insetInlineEnd:null,$$css:!0},hiddenButtonContainer:{opacity:"xg01cxk",visibility:"xlshs6z",transition:"x17ce4s4",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0},visibleButtonContainer:{opacity:"x1hc1fzr",visibility:"xnpuxes",transition:"x17ce4s4",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0}}},75812:(e,n,t)=>{t.d(n,{R:()=>r,Y:()=>o});let o=function(e){return e.CLICK="click",e.HOVER="hover",e}({});function r(e,n){"undefined"!=typeof window&&window.gtag&&window.gtag("event",e,n)}}}]);